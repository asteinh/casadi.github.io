---
date: 2014-10-13T20:07:19Z
draft: false
title: "Teaser"
description: "no description"
weight: 2
mode: "manual"
---

<div class="row">
  <div class="col-md-6">

    <p>Single-shooting optimal control example:</p>
    <div class="multisnip">
{{< highlight octave >}}
import casadi.*


% control vector
u = MX.sym('u',5,1);

x = 1 % initial state
for i=1:5
  % propagate discrete state
  % (can embed an integrator call instead)
  x = x+cos(x)+2*tanh(u(i));
end

nlp = struct;       %  NLP structure
nlp.x = u;          %  decision vars
nlp.f = dot(u,u);   %  objective
nlp.g = x;          %  constraints

% solve using IPOPT
solver = nlpsol('solver','ipopt',nlp);
res = solver('x0',1,'lbg',6,'ubg',6);

plot(full(res.x))
{{< /highlight >}}
{{< highlight python >}}
from casadi import *


# control vector
u = MX.sym('u',5,1)

x = 1 # initial state
for i in range(5):
  # propagate discrete state
  # (can embed an integrator call instead)
  x = x+cos(x)+2*tanh(u[i])


nlp = {}            #  NLP structure
nlp['x'] = u        #  decision vars
nlp['f'] = dot(u,u) #  objective
nlp['g'] = x        #  constraints

# solve using IPOPT
solver = nlpsol('solver','ipopt',nlp)
res = solver(x0=1,lbg=6,ubg=6)

plot(res["x"])
{{< /highlight >}}
{{< highlight cpp >}}
#include <casadi/casadi.hpp>
using namespace casadi;

// control vector
MX u = MX::sym("u",5,1);

MX x = 1; // initial state
for (int i=0;i<5;++i) {
  // propagate discrete state
  // (can embed an integrator call instead)
  x = x+cos(x)+2*tanh(u(i));
}

<<<<<<< HEAD
MXDict nlp;
=======
MXDict nlp;         // NLP structure
>>>>>>> edd2e187f50cb356eaeb4303658704625ce14a26
nlp["x"] = u;       // decision vars
nlp["f"] = dot(u,u);// objective
nlp["g"] = x;       // constraints

// solve using IPOPT
Function solver = nlpsol("solver","ipopt",nlp);
auto res = solver(DMDict{{"x0",1},{"lbg",6},{"ubg",6}});

std::cout << res["x"] << std::endl;

{{< /highlight >}}
</div></div>

  <div class="col-md-6 text-left">
    <p>Basic CasADi workflow:</p>
    <ol>
       <li>Create scalar/matrix symbols</li>
       <li>Compose into expressions</li>
       <li>Specify objective and constraint expressions</li>
       <li>Solve! (Jacobian & Hessian computed by CasADi)</li>
    </ol>
    {{< figure src="../conv.png" >}}
  </div>
</div>
